<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wheel Game Show</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, sans-serif;
      background: radial-gradient(circle at top, #1b2430, #070a0f);
      color: #fff;
      height: 100vh;
      overflow: hidden;
    }

    #adminBtn {
      position: fixed;
      top: 12px;
      right: 12px;
      padding: 0.4rem 0.75rem;
      font-size: 0.75rem;
      border-radius: 999px;
      border: none;
      background: rgba(255,255,255,0.15);
      color: #fff;
      cursor: pointer;
      z-index: 10;
    }

    .layout {
      display: grid;
      grid-template-columns: 420px 1fr;
      height: 100%;
      padding: 1rem;
      gap: 1rem;
    }

    /* LEFT: WHEEL */
    .wheel-area {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    canvas {
      background: #111;
      border-radius: 50%;
      box-shadow: 0 0 40px rgba(255,215,0,0.35);
    }

    /* RIGHT: GAME BOARD */
    .board {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 1rem;
    }

    .phrase-board {
      background: linear-gradient(#0f172a, #020617);
      border-radius: 16px;
      padding: 1rem;
      display: grid;
      justify-content: center;
      align-content: center;
      gap: 0.5rem;
    }

    .phrase-row {
      display: flex;
      justify-content: center;
      gap: 0.35rem;
    }

    .letter-box {
      width: 36px;
      height: 44px;
      background: #16a34a;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.25rem;
      color: #022c22;
      cursor: pointer;
      user-select: none;
    }

    .letter-box.hidden {
      background: #14532d;
      color: transparent;
    }

    .letter-box.space {
      background: transparent;
      cursor: default;
    }

    /* CONTESTANTS */
    .contestants {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 0.75rem;
    }

    .contestant {
      background: #020617;
      border-radius: 14px;
      padding: 0.5rem;
      text-align: center;
      box-shadow: inset 0 0 0 2px #0f172a;
    }

    .contestant.active {
      box-shadow: 0 0 0 2px gold;
    }

    .avatar {
      width: 64px;
      height: 64px;
      margin: 0 auto 0.25rem;
      border-radius: 50%;
      background: linear-gradient(135deg, #38bdf8, #a78bfa);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.75rem;
    }

    .name {
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 0.75rem;
    }

    button {
      padding: 0.5rem 1.25rem;
      border-radius: 999px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, gold, orange);
      color: #111;
    }

    /* ADMIN */
    .admin-panel {
      position: fixed;
      top: 50px;
      right: 12px;
      width: 280px;
      background: #020617;
      border-radius: 14px;
      padding: 1rem;
      display: none;
      z-index: 20;
    }

    .admin-panel.open { display: block; }

    .admin-panel textarea, .admin-panel input, .admin-panel select {
      width: 100%;
      margin-bottom: 0.5rem;
      border-radius: 8px;
      border: none;
      padding: 0.4rem;
    }
  </style>
</head>
<body>

<button id="adminBtn">Admin</button>

<div class="admin-panel" id="adminPanel">
  <label>Contestant Names (comma)</label>
  <textarea id="playersInput">Alice,Bob,Charlie,Denise,Evan</textarea>

  <label>Avatar Gender</label>
  <select id="genderInput">
    <option value="male">Male</option>
    <option value="female">Female</option>
  </select>

  <label>Phrases (one per line)</label>
  <textarea id="phrasesInput">HELLO WORLD
SPIN TO WIN</textarea>

  <button id="saveAdmin">Save</button>
</div>

<div class="layout">
  <div class="wheel-area">
    <canvas id="wheel" width="360" height="360"></canvas>
  </div>

  <div class="board">
    <div class="phrase-board" id="phraseBoard"></div>

    <div class="controls">
      <button id="spinBtn">Spin</button>
      <button id="solveBtn">Solve</button>
    </div>

    <div class="contestants" id="contestants"></div>
  </div>
</div>

<script>
  const wheel = document.getElementById('wheel');
  const ctx = wheel.getContext('2d');
  const phraseBoard = document.getElementById('phraseBoard');
  const contestantsEl = document.getElementById('contestants');

  const adminBtn = document.getElementById('adminBtn');
  const adminPanel = document.getElementById('adminPanel');
  const saveAdmin = document.getElementById('saveAdmin');

  let players = [];
  let phrases = [];
  let currentPhrase = '';
  let revealed = new Set();
  let currentPlayer = 0;

  const wheelValues = [100,200,300,'Lose',400,500,'Bankrupt'];
  let angle = 0;

  function drawWheel() {
    const r = wheel.width / 2;
    const slice = (2*Math.PI)/wheelValues.length;
    ctx.clearRect(0,0,wheel.width,wheel.height);
    ctx.save();
    ctx.translate(r,r);
    ctx.rotate(angle);
    wheelValues.forEach((v,i)=>{
      ctx.beginPath();
      ctx.fillStyle = i%2 ? '#facc15' : '#fb923c';
      ctx.moveTo(0,0);
      ctx.arc(0,0,r,slice*i,slice*(i+1));
      ctx.fill();
      ctx.save();
      ctx.rotate(slice*i+slice/2);
      ctx.textAlign='right';
      ctx.fillStyle='#111';
      ctx.font='bold 14px sans-serif';
      ctx.fillText(v,r-10,5);
      ctx.restore();
    });
    ctx.restore();
  }

  function renderPhrase() {
    phraseBoard.innerHTML = '';
    const rows = [currentPhrase];
    rows.forEach(row=>{
      const rowEl = document.createElement('div');
      rowEl.className = 'phrase-row';
      row.split('').forEach(ch=>{
        if (ch === ' ') {
          const s = document.createElement('div');
          s.className = 'letter-box space';
          rowEl.appendChild(s);
        } else {
          const box = document.createElement('div');
          box.className = 'letter-box hidden';
          box.textContent = ch;
          box.onclick = () => {
            box.classList.remove('hidden');
            revealed.add(ch);
          };
          if (revealed.has(ch)) box.classList.remove('hidden');
          rowEl.appendChild(box);
        }
      });
      phraseBoard.appendChild(rowEl);
    });
  }

  function renderContestants(gender) {
    contestantsEl.innerHTML = '';
    players.forEach((p,i)=>{
      const c = document.createElement('div');
      c.className = 'contestant' + (i===currentPlayer?' active':'');
      const a = document.createElement('div');
      a.className = 'avatar';
      a.textContent = gender==='male'?'ðŸ§‘':'ðŸ‘©';
      const n = document.createElement('div');
      n.className = 'name';
      n.textContent = p;
      c.append(a,n);
      contestantsEl.appendChild(c);
    });
  }

  document.addEventListener('keydown', e=>{
    const l = e.key.toUpperCase();
    if (/^[A-Z]$/.test(l)) {
      revealed.add(l);
      renderPhrase();
    }
  });

  document.getElementById('solveBtn').onclick = ()=>{
    const a = prompt('Solve the phrase');
    if (a && a.toUpperCase()===currentPhrase) {
      revealed = new Set(currentPhrase.replace(/ /g,''));
      renderPhrase();
      alert('Solved!');
    }
  };

  adminBtn.onclick = ()=>adminPanel.classList.toggle('open');

  saveAdmin.onclick = ()=>{
    players = document.getElementById('playersInput').value.split(',').map(p=>p.trim()).slice(0,5);
    phrases = document.getElementById('phrasesInput').value.split('\n').map(p=>p.trim().toUpperCase());
    currentPhrase = phrases[Math.floor(Math.random()*phrases.length)];
    revealed.clear();
    renderPhrase();
    renderContestants(document.getElementById('genderInput').value);
    adminPanel.classList.remove('open');
  };

  drawWheel();
</script>

</body>
</html>
